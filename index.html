<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Telegraph & Chapter 3 Interactive Site</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Special+Elite&display=swap');

    body {
      margin: 0;
      font-family: 'Special Elite', monospace;
      background: #fdfcf9;
      color: #222;
    }

    nav {
      background: #2e2219;
      padding: 12px;
      text-align: center;
    }
    nav a {
      color: #f2d49b;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    nav a.active {
      text-decoration: underline;
    }

    .section {
      display: none;
      padding: 20px;
      max-width: 1000px;
      margin: 0 auto;
    }
    .section.active {
      display: block;
    }

    /* Telegraph Simulator styles */
    .telegraph-container {
      background:#5a4635;
      border:2px solid #2e2219;
      border-radius:10px;
      padding:30px;
      color:#f4f0e8;
    }
    textarea,input {
      width:100%;padding:10px;margin-bottom:15px;border-radius:5px;
      border:1px solid #8b6f52;font-size:1.1em
    }
    textarea{height:100px;background:#f4f0e8;color:#333;resize:none}
    #paper-tape {
      background:#fafafa;
      border:2px dashed #444;
      padding:20px;
      min-height:80px;
      font-size:1.6em;
      font-weight:bold;
      color:#111;
      letter-spacing:4px;
      white-space:pre-wrap;
      margin-bottom:20px
    }
    button {
      margin:6px;padding:10px 18px;border-radius:6px;
      border:1px solid #c2a676;background:#f2d49b;color:#2e2219;cursor:pointer
    }

    /* Chapter 3 styles (simplified) */
    .timeline {display:flex;gap:14px;flex-wrap:wrap;margin:16px 0}
    .timeline-item {
      flex:1 1 220px;background:#fff7fb;border-radius:10px;padding:14px;
      cursor:pointer;border:1px solid #f3c0e0;transition:.2s
    }
    .timeline-item:hover {transform:scale(1.05)}

    .popup {
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
      max-width:720px;width:92%;background:white;padding:20px;
      border-radius:12px;box-shadow:0 18px 48px rgba(0,0,0,0.2);
      z-index:999;display:none
    }
    .popup .close {position:absolute;right:12px;top:10px;border:0;background:transparent;cursor:pointer;font-size:18px}

    .bubble-grid {display:flex;gap:12px;flex-wrap:wrap;margin:10px 0}
    .bubble {background:#fff0fa;border:1px solid #f3c0e0;padding:10px 14px;border-radius:999px;cursor:pointer}

    .split{display:flex;gap:12px;flex-wrap:wrap}
    .card{flex:1;background:#f7f9ff;padding:14px;border-radius:10px;border:1px solid #e6eef6}
    .card h3{margin-top:0;color:#08364d}
  </style>
</head>
<body>

<nav>
  <a data-target="telegraph" class="active">Telegraph Simulator</a>
  <a data-target="chapter3">Chapter 3 Narrative</a>
</nav>

<!-- Telegraph Section -->
<section id="telegraph" class="section active">
  <div class="telegraph-container">
    <h1>Ultimate Telegraph Simulator</h1>
    <p>Type a message to encode it, play Morse sounds, or try decoding challenges!</p>

    <h2>‚úç Encode a Message</h2>
    <textarea id="message-input" placeholder="Type here..."></textarea>
    <div id="paper-tape"></div>
    <button id="play-sound">‚ñ∂ Play Morse Sound</button>
    <button id="clear">üßπ Clear</button>

    <h2>üîé Decode Morse Code</h2>
    <input id="decode-input" placeholder=".... . .-.. .-.. ---">
    <button id="decode-btn">Decode</button>
    <p id="decode-output"></p>
  </div>
</section>

<!-- Chapter 3 Section -->
<section id="chapter3" class="section">
  <h1>Two Wordbooks ‚Äî How Dictionaries Tamed Language</h1>
  <p class="subtitle">Interactive timeline and facts for Chapter 3.</p>

  <div class="timeline">
    <div class="timeline-item" data-id="cawdrey">üìú 1604 ‚Äî Cawdrey's Table Alphabeticall</div>
    <div class="timeline-item" data-id="johnson">üìñ 1755 ‚Äî Johnson's Dictionary</div>
    <div class="timeline-item" data-id="oed">üìö Oxford English Dictionary</div>
  </div>

  <div id="popup" class="popup">
    <button class="close" id="closePopup">‚úï</button>
    <div id="popupContent"></div>
  </div>

  <h2>Did you know?</h2>
  <div class="bubble-grid">
    <button class="bubble" data-id="alpha">Alphabetical order was unusual once</button>
    <button class="bubble" data-id="oedfact">The OED used volunteer slips</button>
  </div>

  <h2>Affordances vs Practices</h2>
  <div class="split">
    <div class="card"><h3>Affordances</h3><ul><li>Lookup ability</li><li>Standardization</li></ul></div>
    <div class="card"><h3>Practices</h3><ul><li>Compiling wordlists</li><li>Using in classrooms</li></ul></div>
  </div>
</section>

<script>
  // Nav switching
  document.querySelectorAll("nav a").forEach(link=>{
    link.addEventListener("click",()=>{
      document.querySelectorAll("nav a").forEach(a=>a.classList.remove("active"));
      link.classList.add("active");
      document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
      document.getElementById(link.dataset.target).classList.add("active");
    });
  });

  // Morse encode/decode
  const morseCode={"A":".-","B":"-...","C":"-.-.","D":"-..","E":".","F":"..-.","G":"--.","H":"....","I":"..","J":".---","K":"-.-","L":".-..","M":"--","N":"-.","O":"---","P":".--.","Q":"--.-","R":".-.","S":"...","T":"-","U":"..-","V":"...-","W":".--","X":"-..-","Y":"-.--","Z":"--..","0":"-----","1":".----","2":"..---","3":"...--","4":"....-","5":".....","6":"-....","7":"--...","8":"---..","9":"----."};
  function encodeToMorse(t){return t.toUpperCase().split('').map(ch=>morseCode[ch]||(ch===' '?'/' : ch)).join(' ')}
  function decodeMorse(m){const r=Object.entries(morseCode).reduce((a,[k,v])=>(a[v]=k,a),{});return m.trim().split(' ').map(s=>s==="/"?" ":r[s]||"?").join('')}

  const input=document.getElementById("message-input"), output=document.getElementById("paper-tape");
  input.addEventListener("input",()=>output.textContent=encodeToMorse(input.value));
  document.getElementById("decode-btn").addEventListener("click",()=>{document.getElementById("decode-output").textContent=decodeMorse(document.getElementById("decode-input").value)});
  document.getElementById("clear").addEventListener("click",()=>{input.value="";output.textContent=""});

  // Timeline popups
  const timelineData={
    cawdrey:{title:"1604 ‚Äî Cawdrey",body:"First English wordbook for 'hard words'."},
    johnson:{title:"1755 ‚Äî Johnson",body:"Standardized spellings, very influential."},
    oed:{title:"Oxford English Dictionary",body:"Historic project built with volunteers."}
  };
  const bubbles={alpha:"Alphabetical order wasn‚Äôt always obvious!",oedfact:"OED relied on volunteers mailing slips."};
  const popup=document.getElementById("popup"),popupContent=document.getElementById("popupContent");
  function openPopup(t,h){popupContent.innerHTML="<h3>"+t+"</h3><p>"+h+"</p>";popup.style.display="block"}
  function closePopup(){popup.style.display="none"}
  document.querySelectorAll(".timeline-item").forEach(el=>el.addEventListener("click",()=>openPopup(timelineData[el.dataset.id].title,timelineData[el.dataset.id].body)));
  document.querySelectorAll(".bubble").forEach(b=>b.addEventListener("click",()=>openPopup("Did you know?",bubbles[b.dataset.id])));
  document.getElementById("closePopup").addEventListener("click",closePopup);
</script>
</body>
</html>
